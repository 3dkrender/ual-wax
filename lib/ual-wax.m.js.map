{"version":3,"file":"ual-wax.m.js","sources":["../src/UALWaxError.ts","../src/WaxUser.ts","../src/WaxIcon.ts","../src/Wax.ts"],"sourcesContent":["import {UALError, UALErrorType} from 'universal-authenticator-library'\r\n\r\nexport class UALWaxError extends UALError {\r\n    constructor(message: string, type: UALErrorType, cause: Error | null) {\r\n        super(message, type, cause, \"Wax\")\r\n    }\r\n}\r\n","import {Chain, SignTransactionResponse, User, UALErrorType} from 'universal-authenticator-library'\r\nimport {WaxJS} from \"@waxio/waxjs/dist\"\r\nimport {UALWaxError} from \"./UALWaxError\";\r\n\r\nexport class WaxUser extends User {\r\n    public readonly accountName: string;\r\n    public readonly requestPermission: string;\r\n\r\n    private readonly pubKeys: string[];\r\n    private readonly wax: WaxJS;\r\n    private readonly chain: Chain;\r\n\r\n    public api: any;\r\n    public rpc: any;\r\n\r\n    constructor(chain: Chain, userAccount: string, pubKeys: string[], wax: WaxJS) {\r\n        super();\r\n\r\n        this.accountName = userAccount;\r\n        this.pubKeys = pubKeys;\r\n        this.requestPermission = 'active';\r\n\r\n        this.chain = chain;\r\n        this.wax = wax;\r\n\r\n        // compatible features\r\n        this.api = wax.api;\r\n        this.rpc = wax.api && wax.api.rpc;\r\n    }\r\n\r\n    /**\r\n     * @param transaction  The transaction to be signed (a object that matches the RpcAPI structure).\r\n     * @param options  Options for tapos fields\r\n     */\r\n    async signTransaction(transaction: any, options: any): Promise<SignTransactionResponse> {\r\n        try {\r\n            const account = await this.wax.login();\r\n\r\n            if (account !== this.accountName) {\r\n                throw new Error('Account does not match the requested permission');\r\n            } else {\r\n                this.api = this.wax.api;\r\n                this.rpc = this.wax.api.rpc;\r\n            }\r\n\r\n            const completedTransaction = await this.wax.api.transact(transaction, options);\r\n\r\n            return this.returnEosjsTransaction(options.broadcast !== false, completedTransaction);\r\n        } catch (e) {\r\n            throw new UALWaxError(\r\n                e.message ? e.message : 'Unable to sign transaction',\r\n                UALErrorType.Signing, e\r\n            );\r\n        }\r\n    }\r\n\r\n    async signArbitrary(): Promise<string> {\r\n        throw new UALWaxError(\r\n            'WAX Cloud Wallet does not currently support signArbitrary',\r\n            UALErrorType.Unsupported, null\r\n        );\r\n    }\r\n\r\n    async verifyKeyOwnership(): Promise<boolean> {\r\n      throw new UALWaxError(\r\n          'WAX Cloud Wallet does not currently support verifyKeyOwnership',\r\n          UALErrorType.Unsupported, null\r\n      );\r\n    }\r\n\r\n    async getAccountName(): Promise<string> {\r\n        return this.accountName;\r\n    }\r\n\r\n    async getChainId(): Promise<string> {\r\n        return this.chain.chainId;\r\n    }\r\n\r\n    async getKeys() {\r\n        return this.pubKeys;\r\n    }\r\n}\r\n","export const WaxIcon: string = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAEt2lUWHRYTU\r\nw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpy\r\nZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az\r\n0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8x\r\nOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIg\r\nogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0\r\naWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaH\r\nR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25z\r\nLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3\r\nhhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9z\r\nVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjMwIgogICBleGlmOl\r\nBpeGVsWURpbWVuc2lvbj0iMzAiCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgdGlmZjpJbWFnZVdp\r\nZHRoPSIzMCIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMzAiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9Ij\r\nIiCiAgIHRpZmY6WFJlc29sdXRpb249IjcyLjAiCiAgIHRpZmY6WVJlc29sdXRpb249IjcyLjAiCiAg\r\nIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQz\r\nYxOTY2LTIuMSIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDYtMTlUMDI6MDE6NDgrMDI6MDAiCiAg\r\nIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDYtMTlUMDI6MDE6NDgrMDI6MDAiPgogICA8eG1wTU06SG\r\nlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9k\r\ndWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgUGhvdG8gKE1hciAzMSAyMD\r\nIwKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMC0wNi0xOVQwMjowMTo0OCswMjowMCIvPgogICAgPC9y\r\nZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSRE\r\nY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+b+esCwAAAYJpQ0NQc1JHQiBJRUM2MTk2\r\nNi0yLjEAACiRdZHPK0RRFMc/ZjCTH42QLCwmYTUjRk1slJmEkjRGGWxm3vxS8+P13kiyVbZTlNj4te\r\nAvYKuslSJSsrKwJjZMz3kzUyOZczv3fO733nO691ywBFNKWq8dgHQmpwUmfM6F0KLT9kI9rXTgwR5W\r\ndHVsdnaaqvZ5T40Zb91mrern/rXGaExXoMYuPKqoWk54Unh6LaeavCPcriTDUeEzYZcmFxS+M/VIiV\r\n9NTpT422QtGPCDpUXYmfjFkV+sJLW0sLycnnRqVSnfx3xJUywzPyexW7wLnQAT+HAyxTh+vAwyIrMX\r\nt/SnX1ZUyR8o5s+QlVxFZpV1NFZIkCSHS9RVqR6TGBc9JiPFutn/v33V40OeUvUmH9Q9G8Z7L9i2oZ\r\nA3jK8jwygcg/UJLjOV/OwhDH+Inq9oPQfg2ITzq4oW2YWLLeh8VMNauChZxS3xOLydQnMI2m6gYanU\r\ns/I+Jw8Q3JCvuoa9feiT847lH1hwZ9/TwxVHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8klEQVRIie\r\n2Uz0tUcRTFzx0nLTBKCHQ14cIJ+rEpxMBFuugPSHAhEdQm2kQtQ4kpaqU5u4pw1cLViBG4SKEfCFFE\r\nSNFQEbWQmrI2UeGMhtOnxbvDPN883QvvbO4753vv+d73ffd9pQQJEiTYajBJAlKSMDMAq+kx2jpuZv\r\n+AJknHJXVI+iZpznNSwbpMBfcbFGaioQtvYFNtg5wu4DMBHgG7JIlisbkhN3csXSu6ADwBOp33AHPA\r\nLHAkZDwPXA5tdgv4ALwGDrg25Zsvsrp6UJJ+Tw7tWc5nxiv5zPPyaPudlYXJLqBXwBlPHvHiu9Qx4d\r\no15+edjzr/4rECdPja9VB93/IlnaWQpZLfu7gyltkvSaXSyx0CdgNrwCugBfgJfAWWgB+uvQPW3PiU\r\nm753PuT8DbDdtQGgCsDf8nB5RIPfc2oNjlr1TwXc8+IbHoeBKxHtNnDYn38B/UABeBZ6wxn3O8l6jM\r\nfOCHAikrgPOBTRLvoJABwFssAYkAPOAQ997aPHP/7mjwGoVovU5yhV27gVeEpwvPdDDT0APgEvgJIb\r\nno5OashjGlgAZoCs683ATeAtwfzsjCtuitHavAjgqmtpIOUxDWzboJnG3wnSUv0CMTMjkmB+EXRK6p\r\na0ZGbzm+W7H4q5bGo8rsEECRIk2Br4D20NhhljafHuAAAAAElFTkSuQmCC`;\r\n","import { Authenticator, Chain, User, UALError } from 'universal-authenticator-library'\r\nimport {UALErrorType} from \"universal-authenticator-library/dist\";\r\nimport {SignatureProvider} from \"eosjs/dist/eosjs-api-interfaces\";\r\nimport { WaxJS } from \"@waxio/waxjs/dist\"\r\n\r\nimport { WaxUser } from \"./WaxUser\";\r\nimport { WaxIcon } from './WaxIcon';\r\nimport {UALWaxError} from \"./UALWaxError\";\r\n\r\nexport class Wax extends Authenticator {\r\n    private wax?: WaxJS;\r\n    private users: WaxUser[] = [];\r\n\r\n    private initiated = false;\r\n\r\n    private session?: {userAccount: string, pubKeys: string[]};\r\n\r\n    private readonly apiSigner?: SignatureProvider;\r\n\r\n    private waxSigningURL: string | undefined;\r\n    private waxAutoSigningURL: string | undefined;\r\n\r\n    constructor(chains: Chain[], options?: {apiSigner?: SignatureProvider, waxSigningURL?: string | undefined, waxAutoSigningURL?: string | undefined}) {\r\n        super(chains, options);\r\n\r\n        this.apiSigner = options && options.apiSigner;\r\n\r\n        this.waxSigningURL = options && options.waxSigningURL;\r\n        this.waxAutoSigningURL = options && options.waxAutoSigningURL;\r\n    }\r\n\r\n    /**\r\n     * Called after `shouldRender` and should be used to handle any async actions required to initialize the authenticator\r\n     */\r\n    async init(): Promise<void> {\r\n        this.initWaxJS();\r\n\r\n        try {\r\n            if (this.wax) {\r\n                if (await this.wax.isAutoLoginAvailable()) {\r\n                    this.receiveLogin();\r\n                } else {\r\n                    const data = JSON.parse(localStorage.getItem('ual-wax:autologin') || 'null');\r\n\r\n                    if (data && data.expire >= Date.now()) {\r\n                        this.receiveLogin(data.userAccount, data.pubKeys);\r\n                    }\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.log('UAL-WAX: autologin error', e);\r\n        }\r\n\r\n        this.initiated = true;\r\n\r\n        console.log(`UAL-WAX: init`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Resets the authenticator to its initial, default state then calls `init` method\r\n     */\r\n    reset() {\r\n        this.wax = undefined;\r\n        this.users = [];\r\n        this.initiated = false;\r\n        this.session = undefined;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns true if the authenticator has errored while initializing.\r\n     */\r\n    isErrored() {\r\n        return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns a URL where the user can download and install the underlying authenticator\r\n     * if it is not found by the UAL Authenticator.\r\n     */\r\n    getOnboardingLink() {\r\n        return 'https://all-access.wax.io/';\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns error (if available) if the authenticator has errored while initializing.\r\n     */\r\n    getError(): UALError | null {\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns true if the authenticator is loading while initializing its internal state.\r\n     */\r\n    isLoading(): boolean {\r\n        return !this.initiated;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns the style of the Button that will be rendered.\r\n     */\r\n    getStyle() {\r\n        return {\r\n            icon: WaxIcon,\r\n            text: 'WAX Cloud Wallet',\r\n            textColor: 'white',\r\n            background: '#111111'\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns whether or not the button should render based on the operating environment and other factors.\r\n     * ie. If your Authenticator App does not support mobile, it returns false when running in a mobile browser.\r\n     */\r\n    shouldRender() {\r\n        return true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns whether or not the dapp should attempt to auto login with the Authenticator app.\r\n     * Auto login will only occur when there is only one Authenticator that returns shouldRender() true and\r\n     * shouldAutoLogin() true.\r\n     */\r\n    shouldAutoLogin() {\r\n        return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns whether or not the button should show an account name input field.\r\n     * This is for Authenticators that do not have a concept of account names.\r\n     */\r\n    async shouldRequestAccountName(): Promise<boolean> {\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns the amount of seconds after the authentication will be invalid for logging in on new\r\n     * browser sessions.  Setting this value to zero will cause users to re-attempt authentication on\r\n     * every new browser session.  Please note that the invalidate time will be saved client-side and\r\n     * should not be relied on for security.\r\n     */\r\n    public shouldInvalidateAfter(): number {\r\n        return 86400;\r\n    }\r\n\r\n    /**\r\n     * Login using the Authenticator App. This can return one or more users depending on multiple chain support.\r\n     */\r\n    async login(): Promise<User[]> {\r\n        console.log(`UAL-WAX: login requested`);\r\n\r\n        // Commented for now to support multiple wax chains such as testnets/staging in the future\r\n        // Mainnet check:  this.chains[0].chainId !== '1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4'\r\n        if (this.chains.length > 1) {\r\n            throw new UALWaxError('WAX Could Wallet only supports one WAX chain',\r\n                UALErrorType.Unsupported, null\r\n            )\r\n        }\r\n\r\n        if (!this.wax) {\r\n            throw new UALWaxError('WAX Cloud Wallet not initialized yet',\r\n                UALErrorType.Initialization, null\r\n            )\r\n        }\r\n\r\n        try {\r\n            if (!this.session) {\r\n                await this.wax.login();\r\n                this.receiveLogin();\r\n            }\r\n\r\n            if (!this.session) {\r\n                throw new Error('Could not receive login information');\r\n            }\r\n\r\n            this.users = [\r\n                new WaxUser(this.chains[0], this.session.userAccount, this.session.pubKeys, this.wax)\r\n            ];\r\n\r\n            console.log(`UAL-WAX: login`, this.users);\r\n\r\n            return this.users;\r\n        } catch (e) {\r\n            throw new UALWaxError(\r\n                e.message ? e.message : 'Could not login to the WAX Cloud Wallet',\r\n                UALErrorType.Login, e\r\n            )\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Logs the user out of the dapp. This will be strongly dependent on each Authenticator app's patterns.\r\n     */\r\n    async logout(): Promise<void> {\r\n        this.initWaxJS();\r\n        this.users = [];\r\n        this.session = undefined;\r\n\r\n        localStorage.setItem('ual-wax:autologin', 'null');\r\n\r\n        console.log(`UAL-WAX: logout`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns true if user confirmation is required for `getKeys`\r\n     */\r\n    requiresGetKeyConfirmation(): boolean {\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns name of authenticator for persistence in local storage\r\n     */\r\n    getName(): string {\r\n      return 'wax';\r\n    }\r\n\r\n    private receiveLogin(userAccount?: string, pubKeys?: string[]) {\r\n        if (!this.wax) {\r\n            return;\r\n        }\r\n\r\n        const login = {\r\n            // @ts-ignore\r\n            userAccount: userAccount || this.wax.userAccount,\r\n            // @ts-ignore\r\n            pubKeys: pubKeys || this.wax.pubKeys,\r\n            expire: Date.now() + this.shouldInvalidateAfter() * 1000\r\n        };\r\n\r\n        if (!login.userAccount || !login.pubKeys) {\r\n            return;\r\n        }\r\n\r\n        localStorage.setItem('ual-wax:autologin', JSON.stringify(login));\r\n        this.session = login;\r\n    }\r\n\r\n    private initWaxJS() {\r\n        this.wax = new WaxJS(this.getEndpoint(), undefined, undefined, false, this.apiSigner, this.waxSigningURL, this.waxAutoSigningURL);\r\n    }\r\n\r\n    private getEndpoint() {\r\n        return `${this.chains[0].rpcEndpoints[0].protocol}://${this.chains[0].rpcEndpoints[0].host}:${this.chains[0].rpcEndpoints[0].port}`;\r\n    }\r\n}\r\n"],"names":["UALErrorType"],"mappings":"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"}